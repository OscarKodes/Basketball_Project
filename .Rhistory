glimpse(WLS)
# Creating new categorical educational attainment variables for respondent and spouse
WLS <- WLS %>%
mutate (
r_edu = case_when(
resp_edu ==12 ~ "1 HS or Less",
resp_edu >= 13 & resp_edu <16 ~ "2 Some College",
resp_edu >=16 & resp_edu ~ "3 BA or more"),
sp_edu = case_when (
spouse_edu == 12 ~ "1 HS or Less",
spouse_edu >=13 & spouse_edu < 16 ~ "2 Some College",
spouse_edu >=16 ~ "3 BA or more"))
table(WLS$r_edu, WLS$sp_edu) #basic cross tabulation of frequencies
prop.table(table(WLS$r_edu, WLS$sp_edu), 1)
chisq.test(WLS$r_edu, WLS$sp_edu)
crosstab(WLS$r_edu, WLS$sp_edu, prop.r = T, chisq = T, dnn=c("Respondent's education", "Spouse's education"))
# Creating marriage type variable
WLS <- WLS %>%
mutate(
homogamous = ifelse(r_edu == sp_edu, 1, 0 ),
hypergamous = ifelse(sexrsp == 1 & r_edu > sp_edu | sexrsp == 2 & r_edu < sp_edu, 1, 0),
hypogamous = ifelse(sexrsp == 2 & r_edu > sp_edu | sexrsp == 1 & r_edu < sp_edu, 1, 0),
marriage_type = case_when(
homogamous==1 ~ "1 Homogamous",
hypergamous==1 ~ "2 Hypergamous",
hypogamous==1 ~ "3 Hypogamous"
))
frequency(WLS$homogamous)
frequency(WLS$hypergamous)
frequency(WLS$hypogamous)
table(WLS$marriage_type, WLS$homogamous)
table(WLS$marriage_type, WLS$hypergamous)
table(WLS$marriage_type, WLS$hypogamous)
WLS <- WLS %>%
mutate(
health4 = case_when(
health==1 ~ "1 Fair or less",
health==2 ~ "2 Good",
health==3 ~ "3 Very Good",
health==4 ~ "4 Excellent"
))
frequency(WLS$health4)
table(WLS$health, WLS$health4)
## Option 1
prop.table(table(WLS$r_edu, WLS$health4), 1)
chisq.test(WLS$r_edu, WLS$health)
prop.table(table(WLS$marriage_type, WLS$health4), 1)
chisq.test(WLS$r_edu, WLS$health)
## Option 2
flat_table(WLS, r_edu, health, margin = "row")
chisq.test(WLS$r_edu, WLS$health)
## Option 3
crosstab(WLS$r_edu, WLS$health4, prop.r = T, chisq = T, dnn=c("Education level", "Self-rated health"))
crosstab(WLS$marriage_type,
WLS$health4,
dnn=c("Marriage Type", "Self-Rated Health"),
prop.r = T,
chisq = T)
# Clear Everything
rm(list = ls())
# Set working directory
setwd("C:/Users/Oscar Ko/Desktop/BasketBall_Project")
# Get working directory
getwd()
# Get data
salary_data <- read.csv("basketball_player_Salaries.csv")
basketball_data <- read.csv("players_stats_by_season_full_details.csv")
# Examine data
head(salary_data)
head(basketball_data)
basketball_data <- read.csv("players_stats_by_season_full_details.csv")
View(salary_data)
View(basketball_data)
tail(salary_data)
tail(basketball_data)
str(salary_data)
str(basketball_data)
summary(salary_data)
summary(basketball_data)
colnames(salary_data)
colnames(basketball_data)
# library
library(tidyverse)
# Filter out only NBA League and only regular season
filter_NBA_league <- basketball_data$League == "NBA"
filter_regular_season <- basketball_data$Season == "Regular_Season"
basketball_data <- basketball_data[filter_NBA_league & filter_regular_season, ]
basketball_data <- read.csv("players_stats_by_season_full_details.csv")
filter_NBA_league <- basketball_data$League == "NBA"
filter_regular_season <- basketball_data$Season == "Regular_Season"
NBA_data <- basketball_data[filter_NBA_league && filter_regular_season, ]
NBA_data <- basketball_data[filter_NBA_league, ]
head(basketball_data$Season)
colnames(basketball_data)
filter_regular_season <- basketball_data$Stage == "Regular_Season"
rm(list = ls())
# Set working directory
setwd("C:/Users/Oscar Ko/Desktop/BasketBall_Project")
# Get working directory
getwd()
# Get data
salary_data <- read.csv("basketball_player_Salaries.csv")
basketball_data <- read.csv("players_stats_by_season_full_details.csv")
# Examine data
# library
library(tidyverse)
filter_league <- basketball_data$League == "NBA"
filter_stage <- basketball_data$Stage == "Regular_Season"
NBA_data <- basketball_data[filter_league && filter_stage, ]
colnames(NBA_data)
# Selected only needed columns
typeof(colnames(NBA_data))
# Selected only needed columns
my_vector <- colnames(NBA_data)
columns_to_keep <- my_vector[! my_vector %in% c("draft_team",
"draft_pick",
"draft_round",
"high_school",
"nationality",
"League",
"Stage")]
NBA_data <- select(data, columns_to_keep)
NBA_data <- select(NBA_data, columns_to_keep)
columns_to_keep
NBA_data2 <- NBA_data[NBA_data == columns_to_keep, ]
colnames(NBA_data2)
# Clear Everything
rm(list = ls())
# Set working directory
setwd("C:/Users/Oscar Ko/Desktop/BasketBall_Project")
# Get working directory
getwd()
# Get data
salary_data <- read.csv("basketball_player_Salaries.csv")
basketball_data <- read.csv("players_stats_by_season_full_details.csv")
# Filter out only NBA League and only regular season
filter_league <- basketball_data$League == "NBA"
filter_stage <- basketball_data$Stage == "Regular_Season"
NBA_data <- basketball_data[filter_league && filter_stage, ]
# Selected only needed columns
cols_to_remove <- c("draft_team",
"draft_pick",
"draft_round",
"high_school",
"nationality",
"League",
"Stage")
NBA_data2 <- NBA_data[!(NBA_data %in% cols_to_remove), ]
colnames(NBA_data2)
NBA_data2 <- NBA_data[!NBA_data %in% cols_to_remove, ]
colnames(NBA_data2)
cols_to_keep <- NBA_data[! NBA_data %in% cols_to_remove]
cols_to_keep
# Selected only needed columns
c_names <- colnames(NBA_data)
cols_to_remove <- c("draft_team",
"draft_pick",
"draft_round",
"high_school",
"nationality",
"League",
"Stage")
cols_to_keep <- c_names[! c_names %in% cols_to_remove]
cols_to_keep
NBA_data <- NBA_data[cols_to_keep, ]
colnames(NBA_data)
NBA_data <- NBA_data[cols_to_keep, ]
colnames(NBA_data)
cols_to_keep
NBA_data <- NBA_data[NBA_data == cols_to_keep, ]
colnames(NBA_data)
cols_to_keep
# Clear Everything
rm(list = ls())
# Set working directory
setwd("C:/Users/Oscar Ko/Desktop/BasketBall_Project")
# Get working directory
getwd()
# Get data
salary_data <- read.csv("basketball_player_Salaries.csv")
basketball_data <- read.csv("players_stats_by_season_full_details.csv")
# Filter out only NBA League and only regular season
filter_league <- basketball_data$League == "NBA"
filter_stage <- basketball_data$Stage == "Regular_Season"
NBA_data <- basketball_data[filter_league && filter_stage, ]
# Selected only needed columns
c_names <- colnames(NBA_data)
cols_to_remove <- c("draft_team",
"draft_pick",
"draft_round",
"high_school",
"nationality",
"League",
"Stage")
filter_cols <- !(c_names %in% cols_to_remove)
NBA_data <- NBA_data[filter_cols, ]
colnames(NBA_data)
NBA_data <- basketball_data[filter_league && filter_stage, ]
NBA_data <- NBA_data[, filter_cols]
colnames(NBA_data)
colnames(salary_data)
head(NBA_data)
head(salary_data)
# Turn Year data into Season
salary_data <- mutate(salary_data,
Season=paste(as.character(year - 1), as.character(year), sep=" - "))
head(salary_data)
tail(salary_data)
head(NBA_data)
# Select columns to keep
colnames(salary_data)
salary_data <- select(salary_data,
Player="name",
Position="position",
Team="team",
Salary="salary",
"Season")
salary_data
head(salary_data)
# merge
merged_data <- merge(NBA_data, salary_data, by = c("Player","Season"))
head(merged_data)
head(NBA_data)
head(NBA_data[NBA_data$Player == "Aaron Brooks"],)
NBA_data[NBA_data$Player == "Aaron Brooks"]
NBA_data[NBA_data$Player == "Aaron Brooks",]
unique(NBA_data$Stage)
Unique(NBA_data$Stage)
NBA_data <- basketball_data[filter_league && filter_stage, ]
unique(NBA_data$Stage)
unique(NBA_data$League)
NBA_data <- basketball_data[filter_league, ]
unique(NBA_data$League)
NBA_data <- NBA_data[filter_stage, ]
unique(NBA_data$Stage)
# Filter out only NBA League and only regular season
filter_NBA <- (basketball_data$League == "NBA") && (basketball_data$Stage == "Regular_Season")
NBA_data <- basketball_data[filter_NBA, ]
unique(NBA_data$League)
# Filter out only NBA League and only regular season
filter_league <- basketball_data$League == "NBA"
NBA_data <- basketball_data[filter_league, ]
unique(NBA_data$League)
filter_state <- NBA_data$Stage == "Regular_Season")
filter_state <- NBA_data$Stage == "Regular_Season"
NBA_data <- NBA_data[filter_stage, ]
unique(NBA_data$Stage)
filter_stage <- NBA_data$Stage == "Regular_Season"
NBA_data <- NBA_data[filter_stage, ]
unique(NBA_data$Stage)
# Clear Everything
rm(list = ls())
# Set working directory
setwd("C:/Users/Oscar Ko/Desktop/BasketBall_Project")
# Get working directory
getwd()
# Get data
salary_data <- read.csv("basketball_player_Salaries.csv")
basketball_data <- read.csv("players_stats_by_season_full_details.csv")
library(tidyverse)
# Filter out only NBA League and only regular season
filter_league <- basketball_data$League == "NBA"
NBA_data <- basketball_data[filter_league, ]
unique(NBA_data$League)
filter_stage <- NBA_data$Stage == "Regular_Season"
NBA_data <- NBA_data[filter_stage, ]
unique(NBA_data$Stage)
# Filter out unneeded columns
c_names <- colnames(NBA_data)
cols_to_remove <- c("draft_team",
"draft_pick",
"draft_round",
"high_school",
"nationality",
"League",
"Stage")
filter_cols <- !(c_names %in% cols_to_remove)
NBA_data <- NBA_data[, filter_cols]
# Cleaning salary_data dataframe ============================
# Turn Year data into Season
salary_data <- mutate(salary_data,
Season=paste(as.character(year - 1),
as.character(year), sep=" - "))
# Select columns to keep
colnames(salary_data)
salary_data <- select(salary_data,
Player="name",
Position="position",
Team="team",
Salary="salary",
"Season")
head(salary_data)
# Combining data frames =====================================
# merge
merged_data <- merge(NBA_data, salary_data, by = c("Player","Season"))
head(merged_data)
tail(merged_data)
# rename team columns
colnames(merged_data$Team.x) <- Team_Code
# rename team columns
colnames(merged_data$Team.x) <- "Team_Code"
# rename team columns
names(merged_data)[names(merged_data) == "Team.x"] <- "Team_Code"
names(merged_data)[names(merged_data) == "Team.y"] <- "Team_Name"
colnames(merged_data)
# Create csv file of merged data
write.csv(merged_data, file = "merged_data.csv", row.names=F)
# Clear Everything
rm(list = ls())
# Set working directory
setwd("C:/Users/Oscar Ko/Desktop/BasketBall_Project")
# Get working directory
getwd()
# Get data
salary_data <- read.csv("basketball_player_Salaries.csv")
basketball_data <- read.csv("players_stats_by_season_full_details.csv")
library(tidyverse)
ball_data dataframe ============================
# Filter out only NBA League and only regular season
filter_league <- basketball_data$League == "NBA"
NBA_data <- basketball_data[filter_league, ]
unique(NBA_data$League)
filter_stage <- NBA_data$Stage == "Regular_Season"
NBA_data <- NBA_data[filter_stage, ]
unique(NBA_data$Stage)
# Filter out unneeded columns
c_names <- colnames(NBA_data)
cols_to_remove <- c("draft_team",
"draft_pick",
"draft_round",
"high_school",
"nationality",
"League",
"Stage")
filter_cols <- !(c_names %in% cols_to_remove)
NBA_data <- NBA_data[, filter_cols]
# Turn Year data into Season
salary_data <- mutate(salary_data,
Season=paste(as.character(year - 1),
as.character(year), sep=" - "))
# Select columns to keep
colnames(salary_data)
salary_data <- select(salary_data,
Player="name",
Position="position",
Team="team",
Salary="salary",
"Season")
head(salary_data)
merged_data <- merge(NBA_data, salary_data, by = c("Player","Season"))
head(merged_data)
tail(merged_data)
# rename team columns
names(merged_data)[names(merged_data) == "Team.x"] <- "Team_Code"
names(merged_data)[names(merged_data) == "Team.y"] <- "Team_Name"
colnames(merged_data)
new_col_names <- c("Player",
"Season",
"Team_Code",
"Games_Played",
"Minutes_Played",
"Field_Goals_Made",
"Field_Goal_Attempts",
"3_Pointers_Made",
"3_Pointers_Attempts",
"Free_Throws_Made",
"Free_Throw_Attempts",
"Turnovers",
"Personal_Fouls",
"Offensive_Rebounds",
"Defensive_Rebounds",
"All_Rebounds",
"Assists",
"Steals",
"Blocks",
"Total_Points_Made",
"birth_year",
"birth_month",
"birth_date",
"height",
"height_cm",
"weight",
"weight_kg",
"Position",
"Team_Name",
"Salary")
colnames(merged_data) <- new_col_names
colnames(merged_data)
# Create some new columns ===================================
merged_data$Free_Throw_Accuracy <- round(Free_Throws_Made / Free_Throw_Attempts, 2)
# Create some new columns ===================================
merged_data$Free_Throw_Accuracy <- round(merged_data$Free_Throws_Made / merged_data$Free_Throw_Attempts, 2)
head(merged_data$Free_Throw_Accuracy)
merged_data$dollars_per_points <- round(merged_data$Total_Points_Made / merged_data$Salary)
head(merged_data$dollars_per_points)
merged_data$dollars_per_points <- round(merged_data$Salary / merged_data$Total_Points_Made)
head(merged_data$dollars_per_points)
merged_data$Field_Goal_Accuracy <- round(merged_data$Field_Goals_Made / merged_data$Field_Goal_Attempts, 2)
merged_data["3_Pointer_Accuracy"] <- round(merged_data["3_Pointers_Made"] / merged_data$["3_Pointers_Attempts"], 2)
# Clear Everything
rm(list = ls())
# Set working directory
setwd("C:/Users/Oscar Ko/Desktop/BasketBall_Project")
# Get working directory
getwd()
# Get data
salary_data <- read.csv("basketball_player_Salaries.csv")
basketball_data <- read.csv("players_stats_by_season_full_details.csv")
# Examine data
# library
library(tidyverse)
# Cleaning basketball_data dataframe ============================
# Filter out only NBA League and only regular season
filter_league <- basketball_data$League == "NBA"
NBA_data <- basketball_data[filter_league, ]
unique(NBA_data$League)
filter_stage <- NBA_data$Stage == "Regular_Season"
NBA_data <- NBA_data[filter_stage, ]
unique(NBA_data$Stage)
# Filter out unneeded columns
c_names <- colnames(NBA_data)
cols_to_remove <- c("draft_team",
"draft_pick",
"draft_round",
"high_school",
"nationality",
"League",
"Stage")
filter_cols <- !(c_names %in% cols_to_remove)
NBA_data <- NBA_data[, filter_cols]
# Cleaning salary_data dataframe ============================
# Turn Year data into Season
salary_data <- mutate(salary_data,
Season=paste(as.character(year - 1),
as.character(year), sep=" - "))
# Select columns to keep
colnames(salary_data)
salary_data <- select(salary_data,
Player="name",
Position="position",
Team="team",
Salary="salary",
"Season")
head(salary_data)
# Combining data frames =====================================
# merge
merged_data <- merge(NBA_data, salary_data, by = c("Player","Season"))
head(merged_data)
tail(merged_data)
# rename team columns
names(merged_data)[names(merged_data) == "Team.x"] <- "Team_Code"
names(merged_data)[names(merged_data) == "Team.y"] <- "Team_Name"
colnames(merged_data)
new_col_names <- c("Player",
"Season",
"Team_Code",
"Games_Played",
"Minutes_Played",
"Field_Goals_Made",
"Field_Goal_Attempts",
"Three_Pointers_Made",
"Three_Pointers_Attempts",
"Free_Throws_Made",
"Free_Throw_Attempts",
"Turnovers",
"Personal_Fouls",
"Offensive_Rebounds",
"Defensive_Rebounds",
"All_Rebounds",
"Assists",
"Steals",
"Blocks",
"Total_Points_Made",
"birth_year",
"birth_month",
"birth_date",
"height",
"height_cm",
"weight",
"weight_kg",
"Position",
"Team_Name",
"Salary")
colnames(merged_data) <- new_col_names
colnames(merged_data)
merged_data$Free_Throw_Accuracy <- round(merged_data$Free_Throws_Made / merged_data$Free_Throw_Attempts, 2)
merged_data$Field_Goal_Accuracy <- round(merged_data$Field_Goals_Made / merged_data$Field_Goal_Attempts, 2)
merged_data$Three_Pointers_Accuracy <- round(merged_data$Three_Pointers_Made / merged_data$Three_Pointers_Attempts, 2)
merged_data$avg_minutes_per_game <- round(merged_data$Minutes_Played / merged_data$Games_Played, 2)
# Create csv file of merged data
write.csv(merged_data, file = "merged_data.csv", row.names=F)
merged_data$avg_minutes_per_game <- ifelse(is.na(merged_data$avg_minutes_per_game),
0, merged_data$avg_minutes_per_game)
View(merged_data)
merged_data$avg_minutes_per_game <- ifelse(is.nan(merged_data$avg_minutes_per_game),
0, merged_data$avg_minutes_per_game)
merged_data$avg_minutes_per_game <- ifelse(merged_data$avg_minutes_per_game == NaN,
0, merged_data$avg_minutes_per_game)
View(merged_data)
merged_data$avg_minutes_per_game <- round(merged_data$Minutes_Played / merged_data$Games_Played, 2)
merged_data$avg_minutes_per_game <- ifelse(is.nan(merged_data$Three_Pointers_Accuracy),
0, merged_data$Three_Pointers_Accuracy)
is.nan(NaN)
merged_data$avg_minutes_per_game <- ifelse(is.nan(merged_data$Three_Pointers_Accuracy),
0, merged_data$Three_Pointers_Accuracy)
View(merged_data)
merged_data$avg_minutes_per_game <- round(merged_data$Minutes_Played / merged_data$Games_Played, 2)
merged_data$Three_Pointers_Accuracy <- ifelse(is.nan(merged_data$Three_Pointers_Accuracy),
0, merged_data$Three_Pointers_Accuracy)
# Create csv file of merged data
write.csv(merged_data, file = "merged_data.csv", row.names=F)
write.csv(merged_data, file = "merged_data.csv", row.names=F)
